{"version":3,"file":"meta.test.js","names":["describe","it","document","TestDocument","updateMeta","title","description","site_name","locale","locales","viewport","keywords","author","getMetaTags","should","deep","equal","getTitle","siteName","expect","to","be","undefined","charset","generateMetaTagsMarkup","expandObjects","subkey1","subkey2","subkey3","expandArrays","convertMeta","key","_","subkey4","subkey5","subkey6","convertOpenGraphLocaleToLanguageTag"],"sources":["../../lib/meta/meta.test.js"],"sourcesContent":["import\r\n{\r\n\tupdateMeta,\r\n\tgenerateMetaTagsMarkup,\r\n\texpandObjects,\r\n\texpandArrays,\r\n\tconvertMeta,\r\n\tconvertOpenGraphLocaleToLanguageTag\r\n}\r\nfrom './meta.js'\r\n\r\nimport TestDocument from './TestDocument.js'\r\n\r\ndescribe(`meta`, () =>\r\n{\r\n\tit(`should update meta`, () =>\r\n\t{\r\n\t\tconst document = new TestDocument\r\n\t\t([\r\n\t\t\t['charset', 'win1250'],\r\n\t\t\t['og:locale', 'de'],\r\n\t\t\t['og:locale', 'fr']\r\n\t\t])\r\n\r\n\t\tupdateMeta\r\n\t\t({\r\n\t\t\ttitle        : 'Test',\r\n\t\t\tdescription  : 'Testing metadata',\r\n\t\t\tsite_name    : 'Testing',\r\n\t\t\tlocale       : 'ru',\r\n\t\t\tlocales      : ['en', 'fr'],\r\n\t\t\tviewport     : 'width=device-width, initial-scale=1',\r\n\t\t\tkeywords     : 'react, redux, webpack',\r\n\t\t\tauthor       : '@catamphetamine'\r\n\t\t},\r\n\t\tdocument)\r\n\r\n\t\tdocument.getMetaTags().should.deep.equal\r\n\t\t([\r\n\t\t\t['og:locale', 'ru'],\r\n\t\t\t['og:title', 'Test'],\r\n\t\t\t['description', 'Testing metadata'],\r\n\t\t\t['og:description', 'Testing metadata'],\r\n\t\t\t['og:site_name', 'Testing'],\r\n\t\t\t['og:locale:alternate', 'en'],\r\n\t\t\t['og:locale:alternate', 'fr'],\r\n\t\t\t['viewport', 'width=device-width, initial-scale=1'],\r\n\t\t\t['keywords', 'react, redux, webpack'],\r\n\t\t\t['author', '@catamphetamine']\r\n\t\t])\r\n\r\n\t\tdocument.getTitle().should.equal('Test')\r\n\t})\r\n\r\n\tit(`should transform \"siteName\" to \"site_name\"`, () =>\r\n\t{\r\n\t\tconst document = new TestDocument\r\n\t\t([\r\n\t\t\t['charset', 'utf-8'],\r\n\t\t\t['og:locale', 'en'],\r\n\t\t])\r\n\r\n\t\tupdateMeta({\r\n\t\t\tsiteName: 'Testing'\r\n\t\t}, document)\r\n\r\n\t\tdocument.getMetaTags().should.deep.equal\r\n\t\t([\r\n\t\t\t['og:site_name', 'Testing']\r\n\t\t])\r\n\t})\r\n\r\n\tit(`should update meta without title and charset`, () =>\r\n\t{\r\n\t\tconst document = new TestDocument()\r\n\t\tupdateMeta({}, document)\r\n\t\tdocument.getMetaTags().should.deep.equal([])\r\n\t\texpect(document.getTitle()).to.be.undefined\r\n\t})\r\n\r\n\tit(`should update charset`, () =>\r\n\t{\r\n\t\tconst document = new TestDocument([['charset', 'win1250']])\r\n\t\tupdateMeta({ charset : 'utf-8' }, document)\r\n\t\tdocument.getMetaTags().should.deep.equal([['charset', 'utf-8']])\r\n\t})\r\n\r\n\tit(`should skip updating same charset`, () =>\r\n\t{\r\n\t\tconst document = new TestDocument([['charset', 'utf-8']])\r\n\t\tupdateMeta({ charset : 'utf-8' }, document)\r\n\t\tdocument.getMetaTags().should.deep.equal([['charset', 'utf-8']])\r\n\t})\r\n\r\n\tit(`should generate meta tags markup`, () =>\r\n\t{\r\n\t\tgenerateMetaTagsMarkup\r\n\t\t({\r\n\t\t\tcharset      : 'utf-8',\r\n\t\t\ttitle        : 'Test',\r\n\t\t\tdescription  : 'Testing metadata',\r\n\t\t\tlocale       : 'ru',\r\n\t\t\tlocales      : ['en', 'fr'],\r\n\t\t\tviewport     : 'width=device-width, initial-scale=1',\r\n\t\t\tkeywords     : 'react, redux, webpack',\r\n\t\t\tauthor       : '@catamphetamine'\r\n\t\t})\r\n\t\t.should.deep.equal\r\n\t\t([\r\n\t\t\t\"<meta charset=\\\"utf-8\\\"/>\",\r\n\t\t\t\"<title>Test</title>\",\r\n\t\t\t\"<meta property=\\\"og:title\\\" content=\\\"Test\\\"/>\",\r\n\t\t\t\"<meta name=\\\"description\\\" content=\\\"Testing metadata\\\"/>\",\r\n\t\t\t\"<meta property=\\\"og:description\\\" content=\\\"Testing metadata\\\"/>\",\r\n\t\t\t\"<meta property=\\\"og:locale\\\" content=\\\"ru\\\"/>\",\r\n\t\t\t\"<meta property=\\\"og:locale:alternate\\\" content=\\\"en\\\"/>\",\r\n\t\t\t\"<meta property=\\\"og:locale:alternate\\\" content=\\\"fr\\\"/>\",\r\n\t\t\t\"<meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\"/>\",\r\n\t\t\t\"<meta name=\\\"keywords\\\" content=\\\"react, redux, webpack\\\"/>\",\r\n\t\t\t\"<meta name=\\\"author\\\" content=\\\"@catamphetamine\\\"/>\"\r\n\t\t])\r\n\t})\r\n\r\n\tit(`should generate meta tags markup with default title and charset`, () =>\r\n\t{\r\n\t\tgenerateMetaTagsMarkup({}).should.deep.equal\r\n\t\t([\r\n\t\t\t\"<meta charset=\\\"utf-8\\\"/>\",\r\n\t\t\t\"<title></title>\"\r\n\t\t])\r\n\t})\r\n\r\n\tit('should expand objects', () => {\r\n\t\texpandObjects(['key', 'value']).should.deep.equal([['key', 'value']])\r\n\r\n\t\texpandObjects(['key', {\r\n\t\t\tsubkey1: 'subvalue1',\r\n\t\t\tsubkey2: 'subvalue2',\r\n\t\t\tsubkey3: {\r\n\t\t\t\t'subsubkey1': 'subsubvalue1',\r\n\t\t\t\t'subsubkey2': 'subsubvalue2'\r\n\t\t\t}\r\n\t\t}]).should.deep.equal([\r\n\t\t\t['key:subkey1', 'subvalue1'],\r\n\t\t\t['key:subkey2', 'subvalue2'],\r\n\t\t\t['key:subkey3:subsubkey1', 'subsubvalue1'],\r\n\t\t\t['key:subkey3:subsubkey2', 'subsubvalue2']\r\n\t\t])\r\n\t})\r\n\r\n\tit('should expand arrays', () => {\r\n\t\texpandArrays(['key', 'value']).should.deep.equal([['key', 'value']])\r\n\r\n\t\texpandArrays(['key', [\r\n\t\t\t'subvalue1',\r\n\t\t\t'subvalue2'\r\n\t\t]]).should.deep.equal([\r\n\t\t\t['key', 'subvalue1'],\r\n\t\t\t['key', 'subvalue2']\r\n\t\t])\r\n\r\n\t\texpandArrays(['key', [{\r\n\t\t\t'subkey1': 'subvalue1',\r\n\t\t\t'subkey2': 'subvalue2'\r\n\t\t}, {\r\n\t\t\t'subkey3': 'subvalue3',\r\n\t\t\t'subkey4': 'subvalue4'\r\n\t\t}]]).should.deep.equal([\r\n\t\t\t['key', {\r\n\t\t\t\t'subkey1': 'subvalue1',\r\n\t\t\t\t'subkey2': 'subvalue2'\r\n\t\t\t}],\r\n\t\t\t['key', {\r\n\t\t\t\t'subkey3': 'subvalue3',\r\n\t\t\t\t'subkey4': 'subvalue4'\r\n\t\t\t}]\r\n\t\t])\r\n\t})\r\n\r\n\tit('should convert meta', () => {\r\n\t\tconvertMeta({\r\n\t\t\tkey: [{\r\n\t\t\t\t_: 'rootvalue1',\r\n\t\t\t\tsubkey1: 'subvalue1',\r\n\t\t\t\tsubkey2: 'subvalue2',\r\n\t\t\t\tsubkey3: {\r\n\t\t\t\t\t'subsubkey1': 'subsubvalue1',\r\n\t\t\t\t\t'subsubkey2': 'subsubvalue2'\r\n\t\t\t\t}\r\n\t\t\t}, {\r\n\t\t\t\t_: 'rootvalue2',\r\n\t\t\t\tsubkey4: 'subvalue3',\r\n\t\t\t\tsubkey5: 'subvalue4',\r\n\t\t\t\tsubkey6: {\r\n\t\t\t\t\t'subsubkey3': 'subsubvalue3',\r\n\t\t\t\t\t'subsubkey4': 'subsubvalue4'\r\n\t\t\t\t}\r\n\t\t\t}]\r\n\t\t}).should.deep.equal([\r\n\t\t\t['key', 'rootvalue1'],\r\n\t\t\t['key:subkey1', 'subvalue1'],\r\n\t\t\t['key:subkey2', 'subvalue2'],\r\n\t\t\t['key:subkey3:subsubkey1', 'subsubvalue1'],\r\n\t\t\t['key:subkey3:subsubkey2', 'subsubvalue2'],\r\n\t\t\t['key', 'rootvalue2'],\r\n\t\t\t['key:subkey4', 'subvalue3'],\r\n\t\t\t['key:subkey5', 'subvalue4'],\r\n\t\t\t['key:subkey6:subsubkey3', 'subsubvalue3'],\r\n\t\t\t['key:subkey6:subsubkey4', 'subsubvalue4']\r\n\t\t])\r\n\t})\r\n\r\n\tit('should convert locales', () => {\r\n\t\tconvertOpenGraphLocaleToLanguageTag('ru_RU').should.equal('ru-RU')\r\n\t\tconvertOpenGraphLocaleToLanguageTag('ru').should.equal('ru')\r\n\t})\r\n})"],"mappings":"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"}