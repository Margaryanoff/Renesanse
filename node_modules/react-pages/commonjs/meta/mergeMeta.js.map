{"version":3,"file":"mergeMeta.js","names":["mergeMeta","pageMeta","pageMetaData","rootMeta","rootMetaData","useSelector","stash","usePageStateSelector","reducerName","selectorFromReducerState","usePageStateSelectorWithCustomUseSelector","meta","BASE_META","props","getRootRouteComponentProps","dropUndefinedProperties","setRootRouteComponentMeta","getPageRouteComponentProps","setPageRouteComponentMeta","locale","locales","filter","_","length"],"sources":["../../lib/meta/mergeMeta.js"],"sourcesContent":["import BASE_META from './baseMeta.js'\r\n\r\nimport dropUndefinedProperties from './dropUndefinedProperties.js'\r\n\r\nimport { usePageStateSelectorWithCustomUseSelector } from '../redux/usePageStateSelector.js'\r\n\r\n/**\r\n * Gathers `<title/>` and `<meta/>` tags (inside `<head/>`)\r\n * defined for this route (`components` array).\r\n * @param {object[]} meta â€” An array of meta objects.\r\n * @return {object}\r\n */\r\nexport default function mergeMeta({\r\n\tpageMeta,\r\n\tpageMetaData,\r\n\trootMeta,\r\n\trootMetaData,\r\n\tuseSelector,\r\n\tstash\r\n}) {\r\n\tconst usePageStateSelector = (reducerName, selectorFromReducerState) => {\r\n\t\treturn usePageStateSelectorWithCustomUseSelector(reducerName, selectorFromReducerState, useSelector)\r\n\t}\r\n\r\n\t// // `Object.assign` is not supported in Internet Explorer.\r\n\t// let meta = Object.assign({}, BASE_META, ...)\r\n\r\n\tlet meta = { ...BASE_META }\r\n\r\n\tif (rootMeta) {\r\n\t\trootMetaData = rootMeta({\r\n\t\t\tuseSelector,\r\n\t\t\tusePageStateSelector,\r\n\t\t\tprops: stash.getRootRouteComponentProps() || {}\r\n\t\t})\r\n\t\tif (rootMetaData) {\r\n\t\t\trootMetaData = dropUndefinedProperties(rootMetaData)\r\n\t\t}\r\n\t}\r\n\r\n\tstash.setRootRouteComponentMeta(rootMetaData)\r\n\tmeta = {\r\n\t\t...meta,\r\n\t\t...rootMetaData\r\n\t}\r\n\r\n\tif (pageMeta) {\r\n\t\tpageMetaData = pageMeta({\r\n\t\t\tuseSelector,\r\n\t\t\tusePageStateSelector,\r\n\t\t\tprops: stash.getPageRouteComponentProps() || {}\r\n\t\t})\r\n\t\tif (pageMetaData) {\r\n\t\t\tpageMetaData = dropUndefinedProperties(pageMetaData)\r\n\t\t}\r\n\t}\r\n\r\n\tstash.setPageRouteComponentMeta(pageMetaData)\r\n\tmeta = {\r\n\t\t...meta,\r\n\t\t...pageMetaData\r\n\t}\r\n\r\n\t// Remove `locale` from `locales`.\r\n\tif (meta.locale && meta.locales) {\r\n\t\tmeta.locales = meta.locales.filter(_ => _ !== meta.locale)\r\n\t\tif (meta.locales.length === 0) {\r\n\t\t\tdelete meta.locales\r\n\t\t}\r\n\t}\r\n\r\n\treturn meta\r\n}\r\n"],"mappings":";;;;;;AAAA;AAEA;AAEA;AAA4F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE5F;AACA;AACA;AACA;AACA;AACA;AACe,SAASA,SAAS,OAO9B;EAAA,IANFC,QAAQ,QAARA,QAAQ;IACRC,YAAY,QAAZA,YAAY;IACZC,QAAQ,QAARA,QAAQ;IACRC,YAAY,QAAZA,YAAY;IACZC,WAAW,QAAXA,WAAW;IACXC,KAAK,QAALA,KAAK;EAEL,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoB,CAAIC,WAAW,EAAEC,wBAAwB,EAAK;IACvE,OAAO,IAAAC,+DAAyC,EAACF,WAAW,EAAEC,wBAAwB,EAAEJ,WAAW,CAAC;EACrG,CAAC;;EAED;EACA;;EAEA,IAAIM,IAAI,qBAAQC,oBAAS,CAAE;EAE3B,IAAIT,QAAQ,EAAE;IACbC,YAAY,GAAGD,QAAQ,CAAC;MACvBE,WAAW,EAAXA,WAAW;MACXE,oBAAoB,EAApBA,oBAAoB;MACpBM,KAAK,EAAEP,KAAK,CAACQ,0BAA0B,EAAE,IAAI,CAAC;IAC/C,CAAC,CAAC;IACF,IAAIV,YAAY,EAAE;MACjBA,YAAY,GAAG,IAAAW,mCAAuB,EAACX,YAAY,CAAC;IACrD;EACD;EAEAE,KAAK,CAACU,yBAAyB,CAACZ,YAAY,CAAC;EAC7CO,IAAI,mCACAA,IAAI,GACJP,YAAY,CACf;EAED,IAAIH,QAAQ,EAAE;IACbC,YAAY,GAAGD,QAAQ,CAAC;MACvBI,WAAW,EAAXA,WAAW;MACXE,oBAAoB,EAApBA,oBAAoB;MACpBM,KAAK,EAAEP,KAAK,CAACW,0BAA0B,EAAE,IAAI,CAAC;IAC/C,CAAC,CAAC;IACF,IAAIf,YAAY,EAAE;MACjBA,YAAY,GAAG,IAAAa,mCAAuB,EAACb,YAAY,CAAC;IACrD;EACD;EAEAI,KAAK,CAACY,yBAAyB,CAAChB,YAAY,CAAC;EAC7CS,IAAI,mCACAA,IAAI,GACJT,YAAY,CACf;;EAED;EACA,IAAIS,IAAI,CAACQ,MAAM,IAAIR,IAAI,CAACS,OAAO,EAAE;IAChCT,IAAI,CAACS,OAAO,GAAGT,IAAI,CAACS,OAAO,CAACC,MAAM,CAAC,UAAAC,CAAC;MAAA,OAAIA,CAAC,KAAKX,IAAI,CAACQ,MAAM;IAAA,EAAC;IAC1D,IAAIR,IAAI,CAACS,OAAO,CAACG,MAAM,KAAK,CAAC,EAAE;MAC9B,OAAOZ,IAAI,CAACS,OAAO;IACpB;EACD;EAEA,OAAOT,IAAI;AACZ"}