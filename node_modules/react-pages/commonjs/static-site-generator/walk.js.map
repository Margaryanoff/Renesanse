{"version":3,"file":"walk.js","names":["walk","dir","Promise","resolve","reject","fs","readdir","error","files","all","map","file","filepath","path","join","stat","stats","isDirectory","then","isFile","foldersContents","reduce","folderContents","concat"],"sources":["../../lib/static-site-generator/walk.js"],"sourcesContent":["import fs from 'fs'\r\nimport path from 'path'\r\n\r\n/**\r\n * Returns the paths to all files in a directory.\r\n * (walks the subdirectory tree recursively).\r\n */\r\nexport default function walk(dir) {\r\n  return new Promise((resolve, reject) => {\r\n    fs.readdir(dir, (error, files) => {\r\n      if (error) {\r\n        return reject(error);\r\n      }\r\n      Promise.all(files.map((file) => {\r\n        return new Promise((resolve, reject) => {\r\n          const filepath = path.join(dir, file);\r\n          fs.stat(filepath, (error, stats) => {\r\n            if (error) {\r\n              return reject(error);\r\n            }\r\n            if (stats.isDirectory()) {\r\n              walk(filepath).then(resolve);\r\n            } else if (stats.isFile()) {\r\n              resolve(filepath);\r\n            }\r\n          });\r\n        });\r\n      }))\r\n      .then((foldersContents) => {\r\n        resolve(foldersContents.reduce((all, folderContents) => all.concat(folderContents), []));\r\n      });\r\n    });\r\n  });\r\n}"],"mappings":";;;;;;AAAA;AACA;AAAuB;AAEvB;AACA;AACA;AACA;AACe,SAASA,IAAI,CAACC,GAAG,EAAE;EAChC,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtCC,cAAE,CAACC,OAAO,CAACL,GAAG,EAAE,UAACM,KAAK,EAAEC,KAAK,EAAK;MAChC,IAAID,KAAK,EAAE;QACT,OAAOH,MAAM,CAACG,KAAK,CAAC;MACtB;MACAL,OAAO,CAACO,GAAG,CAACD,KAAK,CAACE,GAAG,CAAC,UAACC,IAAI,EAAK;QAC9B,OAAO,IAAIT,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;UACtC,IAAMQ,QAAQ,GAAGC,gBAAI,CAACC,IAAI,CAACb,GAAG,EAAEU,IAAI,CAAC;UACrCN,cAAE,CAACU,IAAI,CAACH,QAAQ,EAAE,UAACL,KAAK,EAAES,KAAK,EAAK;YAClC,IAAIT,KAAK,EAAE;cACT,OAAOH,MAAM,CAACG,KAAK,CAAC;YACtB;YACA,IAAIS,KAAK,CAACC,WAAW,EAAE,EAAE;cACvBjB,IAAI,CAACY,QAAQ,CAAC,CAACM,IAAI,CAACf,OAAO,CAAC;YAC9B,CAAC,MAAM,IAAIa,KAAK,CAACG,MAAM,EAAE,EAAE;cACzBhB,OAAO,CAACS,QAAQ,CAAC;YACnB;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,CACFM,IAAI,CAAC,UAACE,eAAe,EAAK;QACzBjB,OAAO,CAACiB,eAAe,CAACC,MAAM,CAAC,UAACZ,GAAG,EAAEa,cAAc;UAAA,OAAKb,GAAG,CAACc,MAAM,CAACD,cAAc,CAAC;QAAA,GAAE,EAAE,CAAC,CAAC;MAC1F,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ"}