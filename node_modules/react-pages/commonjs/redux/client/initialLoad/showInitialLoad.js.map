{"version":3,"file":"showInitialLoad.js","names":["onHideListeners","isHidden","current","showTimer","undefined","showInitialLoad","Component","showDelay","hideAnimationDuration","show","container","document","createElement","body","insertBefore","firstChild","reactRender","React","InitialLoad","onHidden","root","unmount","removeChild","addHiddenListener","listener","push","i","indexOf","splice","setTimeout"],"sources":["../../../../lib/redux/client/initialLoad/showInitialLoad.js"],"sourcesContent":["import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport reactRender from '../../../client/reactRender.js'\r\n\r\nimport InitialLoad from './InitialLoad.js'\r\n\r\nexport const onHideListeners = []\r\n\r\nexport const isHidden = { current: false }\r\nexport const showTimer = { current: undefined }\r\n\r\nexport default function showInitialLoad({\r\n\tComponent,\r\n\tshowDelay,\r\n\thideAnimationDuration\r\n}) {\r\n\tconst show = () => {\r\n\t\tconst container = document.createElement('div')\r\n\t\t// containers.push(container)\r\n\r\n\t\t// Will prepend `element` to `<body/>` (even if `<body/>` is empty).\r\n\t\t// https://stackoverflow.com/questions/2007357/how-to-set-dom-element-as-the-first-child\r\n\t\tdocument.body.insertBefore(container, document.body.firstChild)\r\n\r\n\t\t// const setRef = (ref) => {\r\n\t\t// \t// Update the `ref` that corresponds to the `container`.\r\n\t\t// \tconst index = containers.indexOf(container)\r\n\t\t// \tif (index >= 0) {\r\n\t\t// \t\trefs[index] = ref\r\n\t\t// \t}\r\n\t\t// }\r\n\r\n\t\tconst { root } = reactRender(\r\n\t\t\tReact.createElement(InitialLoad, {\r\n\t\t\t\tComponent,\r\n\t\t\t\thideAnimationDuration,\r\n\t\t\t\t// ref: setRef,\r\n\t\t\t\tonHidden: () => {\r\n\t\t\t\t\t// https://github.com/facebook/react/issues/21441#issuecomment-833298271\r\n\t\t\t\t\t// ReactDOM.unmountComponentAtNode(container)\r\n\t\t\t\t\troot.unmount()\r\n\t\t\t\t\tdocument.body.removeChild(container)\r\n\t\t\t\t},\r\n\t\t\t\taddHiddenListener: (listener) => {\r\n\t\t\t\t\tif (isHidden.current) {\r\n\t\t\t\t\t\tlistener()\r\n\t\t\t\t\t\treturn () => {}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tonHideListeners.push(listener)\r\n\t\t\t\t\treturn () => {\r\n\t\t\t\t\t\tconst i = onHideListeners.indexOf(listener)\r\n\t\t\t\t\t\tif (i >= 0) {\r\n\t\t\t\t\t\t\tonHideListeners.splice(i, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}),\r\n\t\t\tcontainer\r\n\t\t)\r\n\t}\r\n\r\n\tshowTimer.current = setTimeout(show, showDelay)\r\n}\r\n"],"mappings":";;;;;;;AAAA;AACA;AAEA;AAEA;AAA0C;AAEnC,IAAMA,eAAe,GAAG,EAAE;AAAA;AAE1B,IAAMC,QAAQ,GAAG;EAAEC,OAAO,EAAE;AAAM,CAAC;AAAA;AACnC,IAAMC,SAAS,GAAG;EAAED,OAAO,EAAEE;AAAU,CAAC;AAAA;AAEhC,SAASC,eAAe,OAIpC;EAAA,IAHFC,SAAS,QAATA,SAAS;IACTC,SAAS,QAATA,SAAS;IACTC,qBAAqB,QAArBA,qBAAqB;EAErB,IAAMC,IAAI,GAAG,SAAPA,IAAI,GAAS;IAClB,IAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;IAC/C;;IAEA;IACA;IACAD,QAAQ,CAACE,IAAI,CAACC,YAAY,CAACJ,SAAS,EAAEC,QAAQ,CAACE,IAAI,CAACE,UAAU,CAAC;;IAE/D;IACA;IACA;IACA;IACA;IACA;IACA;;IAEA,mBAAiB,IAAAC,wBAAW,EAC3BC,iBAAK,CAACL,aAAa,CAACM,uBAAW,EAAE;QAChCZ,SAAS,EAATA,SAAS;QACTE,qBAAqB,EAArBA,qBAAqB;QACrB;QACAW,QAAQ,EAAE,oBAAM;UACf;UACA;UACAC,IAAI,CAACC,OAAO,EAAE;UACdV,QAAQ,CAACE,IAAI,CAACS,WAAW,CAACZ,SAAS,CAAC;QACrC,CAAC;QACDa,iBAAiB,EAAE,2BAACC,QAAQ,EAAK;UAChC,IAAIvB,QAAQ,CAACC,OAAO,EAAE;YACrBsB,QAAQ,EAAE;YACV,OAAO,YAAM,CAAC,CAAC;UAChB;UACAxB,eAAe,CAACyB,IAAI,CAACD,QAAQ,CAAC;UAC9B,OAAO,YAAM;YACZ,IAAME,CAAC,GAAG1B,eAAe,CAAC2B,OAAO,CAACH,QAAQ,CAAC;YAC3C,IAAIE,CAAC,IAAI,CAAC,EAAE;cACX1B,eAAe,CAAC4B,MAAM,CAACF,CAAC,EAAE,CAAC,CAAC;YAC7B;UACD,CAAC;QACF;MACD,CAAC,CAAC,EACFhB,SAAS,CACT;MA1BOU,IAAI,gBAAJA,IAAI;EA2Bb,CAAC;EAEDjB,SAAS,CAACD,OAAO,GAAG2B,UAAU,CAACpB,IAAI,EAAEF,SAAS,CAAC;AAChD"}