{"version":3,"file":"InitialLoad.js","names":["shouldShowInitialLoad","InitialLoad","ref","Component","onHidden","addHiddenListener","hideAnimationDuration","useState","loading","setLoading","onHiddenTimer","useRef","onHide","current","setTimeout","useEffect","removeOnHideListener","clearTimeout","React","createElement","initial","show","forwardRef","propTypes","PropTypes","elementType","func","isRequired","number"],"sources":["../../../../lib/redux/client/initialLoad/InitialLoad.js"],"sourcesContent":["import React, { useState, useRef, useEffect, useImperativeHandle } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst shouldShowInitialLoad = true\r\n\r\nexport default function InitialLoad({\r\n\tComponent,\r\n\tonHidden,\r\n\taddHiddenListener,\r\n\thideAnimationDuration\r\n}, ref) {\r\n\tconst [loading, setLoading] = useState(true)\r\n\r\n\t// const onFinishedLoadingCallback = useRef()\r\n\tconst onHiddenTimer = useRef()\r\n\r\n\t// // Provides a `setLoading()` instance method.\r\n\t// useImperativeHandle(ref, () => ({\r\n\t// \tsetFinishedLoading: (callback) => {\r\n\t// \t\tonFinishedLoadingCallback.current = callback\r\n\t// \t\tsetLoading(false)\r\n\t// \t}\r\n\t// }), [\r\n\t// \tonFinishedLoadingCallback,\r\n\t// \tsetLoading\r\n\t// ])\r\n\r\n\t// useEffect(() => {\r\n\t// \tif (!loading) {\r\n\t// \t\tonFinishedLoadingCallback.current()\r\n\t// \t\tonFinishedLoadingCallback.current = undefined\r\n\t// \t}\r\n\t// }, [loading])\r\n\r\n\tconst onHide = () => {\r\n\t\tsetLoading(false)\r\n\t\tonHiddenTimer.current = setTimeout(onHidden, hideAnimationDuration)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tlet removeOnHideListener\r\n\t\tif (shouldShowInitialLoad) {\r\n\t\t\tremoveOnHideListener = addHiddenListener(onHide)\r\n\t\t} else {\r\n\t\t\tonHide()\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tif (removeOnHideListener) {\r\n\t\t\t\tremoveOnHideListener()\r\n\t\t\t}\r\n\t\t\tclearTimeout(onHiddenTimer.current)\r\n\t\t}\r\n\t}, [])\r\n\r\n\treturn React.createElement(Component, {\r\n\t\tinitial: true,\r\n\t\tshow: loading,\r\n\t\thideAnimationDuration\r\n\t})\r\n}\r\n\r\nInitialLoad = React.forwardRef(InitialLoad)\r\n\r\nInitialLoad.propTypes = {\r\n\tComponent: PropTypes.elementType,\r\n\tonHidden: PropTypes.func.isRequired,\r\n\taddHiddenListener: PropTypes.func.isRequired,\r\n\thideAnimationDuration: PropTypes.number\r\n}"],"mappings":";;;;;;;AAAA;AACA;AAAkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAElC,IAAMA,qBAAqB,GAAG,IAAI;AAEnB,SAASC,WAAW,OAKhCC,GAAG,EAAE;EAAA,IAJPC,SAAS,QAATA,SAAS;IACTC,QAAQ,QAARA,QAAQ;IACRC,iBAAiB,QAAjBA,iBAAiB;IACjBC,qBAAqB,QAArBA,qBAAqB;EAErB,gBAA8B,IAAAC,eAAQ,EAAC,IAAI,CAAC;IAAA;IAArCC,OAAO;IAAEC,UAAU;;EAE1B;EACA,IAAMC,aAAa,GAAG,IAAAC,aAAM,GAAE;;EAE9B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEA;EACA;EACA;EACA;EACA;EACA;;EAEA,IAAMC,MAAM,GAAG,SAATA,MAAM,GAAS;IACpBH,UAAU,CAAC,KAAK,CAAC;IACjBC,aAAa,CAACG,OAAO,GAAGC,UAAU,CAACV,QAAQ,EAAEE,qBAAqB,CAAC;EACpE,CAAC;EAED,IAAAS,gBAAS,EAAC,YAAM;IACf,IAAIC,oBAAoB;IACxB,IAAIhB,qBAAqB,EAAE;MAC1BgB,oBAAoB,GAAGX,iBAAiB,CAACO,MAAM,CAAC;IACjD,CAAC,MAAM;MACNA,MAAM,EAAE;IACT;IACA,OAAO,YAAM;MACZ,IAAII,oBAAoB,EAAE;QACzBA,oBAAoB,EAAE;MACvB;MACAC,YAAY,CAACP,aAAa,CAACG,OAAO,CAAC;IACpC,CAAC;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOK,iBAAK,CAACC,aAAa,CAAChB,SAAS,EAAE;IACrCiB,OAAO,EAAE,IAAI;IACbC,IAAI,EAAEb,OAAO;IACbF,qBAAqB,EAArBA;EACD,CAAC,CAAC;AACH;AAEA,qBAAAL,WAAW,GAAGiB,iBAAK,CAACI,UAAU,CAACrB,WAAW,CAAC;AAE3CA,WAAW,CAACsB,SAAS,GAAG;EACvBpB,SAAS,EAAEqB,qBAAS,CAACC,WAAW;EAChCrB,QAAQ,EAAEoB,qBAAS,CAACE,IAAI,CAACC,UAAU;EACnCtB,iBAAiB,EAAEmB,qBAAS,CAACE,IAAI,CAACC,UAAU;EAC5CrB,qBAAqB,EAAEkB,qBAAS,CAACI;AAClC,CAAC"}