{"version":3,"file":"HttpClient.js","names":["createHttpClient","settings","getStore","options","onBeforeSend","http","onRequest","request","parameters","useSelector","getter","getState","authentication","accessToken","authTokenHeader","header","getAuthToken","getCookie","helpers","HttpClient","catchToRetry","transformUrl","parseDates","findAndConvertIsoDateStringsToDateInstances","useCrossDomainCookies"],"sources":["../../lib/redux/HttpClient.js"],"sourcesContent":["import HttpClient from '../HttpClient.js'\r\n\r\nexport default function createHttpClient(settings, getStore, options = {}) {\r\n\t// Add `useSelector()` parameter to `http.onRequest()` function.\r\n\tlet onBeforeSend\r\n\tif (settings.http.onRequest) {\r\n\t\tonBeforeSend = (request, parameters) => {\r\n\t\t\tsettings.http.onRequest(request, {\r\n\t\t\t\t...parameters,\r\n\t\t\t\tuseSelector: getter => getter(getStore().getState())\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tconst {\r\n\t\taccessToken,\r\n\t\theader: authTokenHeader\r\n\t} = settings.http.authentication || {}\r\n\r\n\t// Add `useSelector()` parameter to `accessToken()` function.\r\n\tlet getAuthToken\r\n\tif (accessToken) {\r\n\t\tgetAuthToken = (getCookie, helpers) => {\r\n      // If a token is returned from this function, it gets sent as\r\n      // `Authorization: Bearer {token}` HTTP header.\r\n\t\t\treturn accessToken({\r\n\t\t\t\t...helpers,\r\n\t\t\t\tgetCookie,\r\n\t\t\t\tuseSelector: getter => getter(getStore().getState())\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\treturn new HttpClient({\r\n\t\tonBeforeSend,\r\n\t\tgetAuthToken,\r\n\t\tauthTokenHeader,\r\n\t\tcatchToRetry: settings.http.catch,\r\n\t\ttransformUrl: settings.http.transformUrl,\r\n\t\tparseDates: settings.http.findAndConvertIsoDateStringsToDateInstances,\r\n\t\tuseCrossDomainCookies: settings.http.useCrossDomainCookies,\r\n\t\t...options\r\n\t})\r\n}"],"mappings":";;;;;;AAAA;AAAyC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAE1B,SAASA,gBAAgB,CAACC,QAAQ,EAAEC,QAAQ,EAAgB;EAAA,IAAdC,OAAO,uEAAG,CAAC,CAAC;EACxE;EACA,IAAIC,YAAY;EAChB,IAAIH,QAAQ,CAACI,IAAI,CAACC,SAAS,EAAE;IAC5BF,YAAY,GAAG,sBAACG,OAAO,EAAEC,UAAU,EAAK;MACvCP,QAAQ,CAACI,IAAI,CAACC,SAAS,CAACC,OAAO,kCAC3BC,UAAU;QACbC,WAAW,EAAE,qBAAAC,MAAM;UAAA,OAAIA,MAAM,CAACR,QAAQ,EAAE,CAACS,QAAQ,EAAE,CAAC;QAAA;MAAA,GACnD;IACH,CAAC;EACF;EAEA,WAGIV,QAAQ,CAACI,IAAI,CAACO,cAAc,IAAI,CAAC,CAAC;IAFrCC,WAAW,QAAXA,WAAW;IACHC,eAAe,QAAvBC,MAAM;;EAGP;EACA,IAAIC,YAAY;EAChB,IAAIH,WAAW,EAAE;IAChBG,YAAY,GAAG,sBAACC,SAAS,EAAEC,OAAO,EAAK;MACnC;MACA;MACH,OAAOL,WAAW,iCACdK,OAAO;QACVD,SAAS,EAATA,SAAS;QACTR,WAAW,EAAE,qBAAAC,MAAM;UAAA,OAAIA,MAAM,CAACR,QAAQ,EAAE,CAACS,QAAQ,EAAE,CAAC;QAAA;MAAA,GACnD;IACH,CAAC;EACF;EAEA,OAAO,IAAIQ,sBAAU;IACpBf,YAAY,EAAZA,YAAY;IACZY,YAAY,EAAZA,YAAY;IACZF,eAAe,EAAfA,eAAe;IACfM,YAAY,EAAEnB,QAAQ,CAACI,IAAI,SAAM;IACjCgB,YAAY,EAAEpB,QAAQ,CAACI,IAAI,CAACgB,YAAY;IACxCC,UAAU,EAAErB,QAAQ,CAACI,IAAI,CAACkB,2CAA2C;IACrEC,qBAAqB,EAAEvB,QAAQ,CAACI,IAAI,CAACmB;EAAqB,GACvDrB,OAAO,EACT;AACH"}