{"version":3,"file":"combine.js","names":["combineLoaders_","loaders","server","isInitialClientSideLoad","useSelector","dispatch","location","params","history","context","getCookie","loading","normalizeLoadFunctions","filterLoaders","chain","combineLoaders","length","isCancelled","cancelled","createPromiseFromLoaders","loadFunctionArgument","loadersOfComponent","loader","normalizeLoadFunction","load","isServerSideLoaded","options","client","slice","forEach","_","i","filter","parallel","concat","isBlockingLoader","getLoadFunctionForLoader","Array","isArray","siblingLoader","blocking","blockingSibling","then","result","isObject","Promise","all","map","subChain","results","isResult","reduce","combined","mergeResults","undefined","Error","promise","subChainResult","resolve","BLANK_RESULT","result1","result2","array","part"],"sources":["../../../lib/redux/load/combine.js"],"sourcesContent":["import { isServerSideLoaded } from '../../client/flags.js'\r\nimport isObject from '../../isObject.js'\r\n\r\n// Returns function returning a Promise\r\n// which resolves when all the required page `load`s are resolved.\r\n//\r\n// If no loading is needed, then returns nothing.\r\n//\r\nexport default function combineLoaders_\r\n(\r\n\tloaders,\r\n\tserver,\r\n\tisInitialClientSideLoad,\r\n\tuseSelector,\r\n\tdispatch,\r\n\tlocation,\r\n\tparams,\r\n\thistory,\r\n\tcontext,\r\n\tgetCookie,\r\n\tloading\r\n)\r\n{\r\n\t// Set `.load({ ... })` function arguments,\r\n\t// and also set default `load` options.\r\n\tnormalizeLoadFunctions(\r\n\t\tloaders,\r\n\t\t{\r\n\t\t\tdispatch,\r\n\t\t\tuseSelector,\r\n\t\t\tlocation,\r\n\t\t\tparams,\r\n\t\t\thistory,\r\n\t\t\tserver,\r\n\r\n\t\t\t// `getCookie` `load` parameter has been requested:\r\n\t\t\t// https://github.com/catamphetamine/react-website/issues/71\r\n\t\t\tgetCookie,\r\n\r\n\t    // (optional)\r\n\t    //\r\n\t    // \"Load Context\" could hold any custom developer-defined variables\r\n\t    // that could then be accessed inside `.load()` functions.\r\n\t    //\r\n\t    // To define a \"load context\":\r\n\t    //\r\n\t    // * Pass `getLoadContext()` function as an option to the client-side `render()` function.\r\n\t    //   The options are the second argument of that function.\r\n\t    //   The result of the function will be passed to each `load()` function as `context` parameter.\r\n\t    //   The result of the function will be reused within the scope of a given web browser tab,\r\n\t    //   i.e. `getLoadContext()` function will only be called once for a given web browser tab.\r\n\t    //\r\n\t    // * (if also using server-side rendering)\r\n\t    //   Pass `getLoadContext()` function as an option to the server-side `webpageServer()` function.\r\n\t    //   The options are the second argument of that function.\r\n\t    //   The result of the function will be passed to each `load()` function as `context` parameter.\r\n\t    //   The result of the function will be reused within the scope of a given HTTP request,\r\n\t    //   i.e. `getLoadContext()` function will only be called once for a given HTTP request.\r\n\t    //\r\n\t    // `getLoadContext()` function recevies an argument object: `{ dispatch }`.\r\n\t    // `getLoadContext()` function should return a \"load context\" object.\r\n\t    //\r\n\t    // Miscellaneous: `context` parameter will also be passed to `onNavigationFinished()`/`onBeforeNavigate()` functions.\r\n\t    //\r\n\t\t\tcontext\r\n\t\t},\r\n\t\t{\r\n\t\t\tserver\r\n\t\t}\r\n\t)\r\n\r\n\t// Only select those `load`s which\r\n\t// should be run in current circumstances.\r\n\tloaders = filterLoaders(loaders, server, isInitialClientSideLoad)\r\n\r\n\t// Construct a sequential chain out of loaders.\r\n\t// Because each of them could be either parallel or sequential.\r\n\tconst chain = combineLoaders(loaders)\r\n\r\n\t// If there are no `load`s for this route, then exit.\r\n\tif (chain.length === 0) {\r\n\t\treturn\r\n\t}\r\n\r\n\t// Return a function that generates a `load()` `Promise` chain.\r\n\tconst isCancelled = () => loading.cancelled\r\n\treturn () => createPromiseFromLoaders(chain, isCancelled)\r\n}\r\n\r\n// Applies default `load` options\r\n// and sets `load` function arguments.\r\nfunction normalizeLoadFunctions(loaders, loadFunctionArgument, { server })\r\n{\r\n\tfor (const loadersOfComponent of loaders) {\r\n\t\tfor (const loader of loadersOfComponent) {\r\n\t\t\tnormalizeLoadFunction(loader, loadFunctionArgument, { server })\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Applies default `load` options\r\n// and sets `load` function arguments.\r\nfunction normalizeLoadFunction(loader, loadFunctionArgument, { server })\r\n{\r\n\tconst load = loader.load\r\n\tloader.load = () => load(loadFunctionArgument)\r\n\r\n\t// If Server-Side Rendering is not being used at all\r\n\t// then all `load`s must be marked as client-side ones.\r\n\tif (!server && !isServerSideLoaded()) {\r\n\t\tloader.options.client = true\r\n\t}\r\n}\r\n\r\n// Selects only those `load`s which\r\n// should be run in current circumstances.\r\nexport function filterLoaders(loaders, server, isInitialClientSideLoad)\r\n{\r\n\t// `loaders` array will be mutated\r\n\tloaders = loaders.slice()\r\n\r\n\tloaders.forEach((_, i) =>\r\n\t{\r\n\t\tloaders[i] = loaders[i].filter((loader) =>\r\n\t\t{\r\n\t\t\t// Don't execute client-side-only `load`s on server side\r\n\t\t\tif (loader.options.client && server) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t// Don't execute server-side-only `load`s on client side\r\n\t\t\tif (loader.options.server && !server) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\t// If it's initial client side load (after the page has been loaded),\r\n\t\t\t// then only execute those `load`s marked as \"client-side-only\".\r\n\t\t\tif (isInitialClientSideLoad && !loader.options.client) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\treturn true\r\n\t\t})\r\n\t})\r\n\r\n\treturn loaders.filter(loadersOfComponent => loadersOfComponent.length > 0)\r\n}\r\n\r\n// Constructs `load` chain.\r\n//\r\n// param `loaders` is an array of `loadersOfComponent`.\r\n// `loadersOfComponent` is an array of all\r\n// `load`s for a particular React component.\r\n// Therefore `loaders` is an array of arrays.\r\nexport function combineLoaders(loaders, chain = [], parallel = [])\r\n{\r\n\t// If all `load`s have been visited\r\n\tif (loaders.length === 0) {\r\n\t\tif (parallel.length === 0) {\r\n\t\t\treturn chain\r\n\t\t}\r\n\t\t// Finalize pending parallel `load`s\r\n\t\tif (parallel.length === 1) {\r\n\t\t\treturn chain.concat(parallel)\r\n\t\t}\r\n\t\treturn chain.concat({ parallel })\r\n\t}\r\n\r\n\t// `loadersOfComponent` is an array of all `load`s for a particular React component.\r\n\tconst loader = loaders[0]\r\n\tloaders = loaders.slice(1)\r\n\r\n\tif (!isBlockingLoader(loader)) {\r\n\t\treturn combineLoaders(\r\n\t\t\tloaders,\r\n\t\t\tchain,\r\n\t\t\tconcat(parallel, getLoadFunctionForLoader(loader))\r\n\t\t)\r\n\t}\r\n\r\n\tif (parallel.length === 0) {\r\n\t\treturn combineLoaders(\r\n\t\t\tloaders,\r\n\t\t\tconcat(chain, getLoadFunctionForLoader(loader)),\r\n\t\t\t[]\r\n\t\t)\r\n\t}\r\n\r\n\treturn combineLoaders(\r\n\t\tloaders,\r\n\t\tchain.concat({ parallel: concat(parallel, getLoadFunctionForLoader(loader)) }),\r\n\t\t[]\r\n\t)\r\n}\r\n\r\nfunction getLoadFunctionForLoader(loader)\r\n{\r\n\t// A list of same component's `load`s\r\n\tif (Array.isArray(loader)) {\r\n\t\treturn combineLoaders(loader)\r\n\t}\r\n\r\n\t// Same component adjacent `load`\r\n\treturn loader.load\r\n}\r\n\r\nfunction isBlockingLoader(loader)\r\n{\r\n\t// A list of same component's `load`s\r\n\tif (Array.isArray(loader))\r\n\t{\r\n\t\t// Determine the proper `blocking` option\r\n\t\t// for this component's `load`s.\r\n\t\tfor (const siblingLoader of loader)\r\n\t\t{\r\n\t\t\t// If any of component's `load`s are `blocking: true`\r\n\t\t\t// then all of them are `blocking: true`.\r\n\t\t\tif (siblingLoader.options.blocking)\r\n\t\t\t{\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\t// Same component adjacent `load`\r\n\treturn loader.options.blockingSibling\r\n}\r\n\r\n// Returns a `Promise` chain.\r\nexport function createPromiseFromLoaders(chain, isCancelled) {\r\n\tif (typeof chain === 'function') {\r\n\t\treturn chain().then((result) => {\r\n\t\t\tif (isCancelled()) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\treturn result\r\n\t\t})\r\n\t}\r\n\r\n\tif (isObject(chain)) {\r\n\t\tif (Array.isArray(chain.parallel)) {\r\n\t\t\treturn Promise.all(\r\n\t\t\t\tchain.parallel.map(subChain => createPromiseFromLoaders(subChain, isCancelled))\r\n\t\t\t)\r\n\t\t\t\t.then((results) => {\r\n\t\t\t\t\tif (isCancelled()) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn results.filter(isResult).reduce((combined, result) => {\r\n\t\t\t\t\t\tif (combined) {\r\n\t\t\t\t\t\t\treturn mergeResults(combined, result)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result\r\n\t\t\t\t\t}, undefined)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tthrow new Error('If loader chain element is an object then it should contain `parallel` property which should be an array of loader chains')\r\n\t\t}\r\n\t}\r\n\r\n\tif (Array.isArray(chain)) {\r\n\t\treturn chain.reduce((promise, subChain) => {\r\n\t\t\treturn promise.then((result) => {\r\n\t\t\t\tif (isCancelled()) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\treturn createPromiseFromLoaders(subChain, isCancelled).then((subChainResult) => {\r\n\t\t\t\t\tif (isResult(result)) {\r\n\t\t\t\t\t\tif (isResult(subChainResult)) {\r\n\t\t\t\t\t\t\treturn mergeResults(result, subChainResult)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn subChainResult\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t}, Promise.resolve())\r\n\t}\r\n\r\n\tthrow new Error(`Unsupported loader chain: ${chain} of type ${typeof chain}`)\r\n}\r\n\r\nconst BLANK_RESULT = {}\r\n\r\nfunction isResult(result) {\r\n\tif (result === undefined) {\r\n\t\treturn false\r\n\t}\r\n\treturn isObject(result)\r\n}\r\n\r\nfunction mergeResults(result1, result2) {\r\n\treturn {\r\n\t\t...result1,\r\n\t\t...result2\r\n\t}\r\n}\r\n\r\nfunction concat(array, part)\r\n{\r\n\tif (Array.isArray(part) && part.length > 1) {\r\n\t\t// Pushes an array\r\n\t\treturn array.concat([part])\r\n\t}\r\n\t// Pushes a single element\r\n\treturn array.concat(part)\r\n}"],"mappings":"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"}