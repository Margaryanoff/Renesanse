{"version":3,"file":"CustomEvent.js","names":["CustomEvent","event_name","options","bubbles","cancelable","detail","undefined","event","document","createEvent","initCustomEvent","preventDefault","call","Object","defineProperty","get","error","defaultPrevented","window","prototype","Event","PolyfillCustomEvent","Error"],"sources":["../../lib/websocket/CustomEvent.js"],"sourcesContent":["// Polyfill for creating CustomEvents on IE9/10/11.\r\n//\r\n// Adapted from `custom-event-polyfill` library on October 9th 2017:\r\n// https://github.com/krambuhl/custom-event-polyfill/blob/master/custom-event-polyfill.js\r\n\r\nfunction CustomEvent(event_name, options)\r\n{\r\n\toptions = options ||\r\n\t{\r\n\t\tbubbles    : false,\r\n\t\tcancelable : false,\r\n\t\tdetail     : undefined\r\n\t}\r\n\r\n\t// IE 11 way of creating a `CustomEvent`\r\n\tconst event = document.createEvent('CustomEvent')\r\n\tevent.initCustomEvent(event_name, options.bubbles, options.cancelable, options.detail)\r\n\r\n\t// Add `defaultPrevented` flag to the event\r\n\tconst preventDefault = event.preventDefault\r\n\tevent.preventDefault = function()\r\n\t{\r\n\t\tpreventDefault.call(this)\r\n\r\n\t\ttry\r\n\t\t{\r\n\t\t\tObject.defineProperty(this, 'defaultPrevented',\r\n\t\t\t{\r\n\t\t\t\tget()\r\n\t\t\t\t{\r\n\t\t\t\t\treturn true\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\tcatch (error)\r\n\t\t{\r\n\t\t\tthis.defaultPrevented = true\r\n\t\t}\r\n\t}\r\n\r\n\treturn event\r\n}\r\n\r\n// `window` is `undefined` on server side.\r\n// This file will still be included on server side\r\n// because server side still uses common utilities like\r\n// `meta`, `load`, `redirect()`, `goto()`, etc,\r\n// and therefore it does `require('react-pages')`\r\n// which executes `react-pages/index.common.js`\r\n// which in turn executes this `if` condition.\r\nif (typeof window !== 'undefined')\r\n{\r\n\tCustomEvent.prototype = window.Event.prototype\r\n}\r\n\r\nexport default function PolyfillCustomEvent()\r\n{\r\n\ttry\r\n\t{\r\n\t\tconst event = new window.CustomEvent('test')\r\n\t\tevent.preventDefault()\r\n\t\tif (event.defaultPrevented !== true)\r\n\t\t{\r\n\t\t\t// IE has problems with .preventDefault() on custom events\r\n\t\t\t// http://stackoverflow.com/questions/23349191\r\n\t\t\tthrow new Error('Could not prevent default')\r\n\t\t}\r\n\t}\r\n\tcatch (error)\r\n\t{\r\n\t\t// If `CustomEvent` misbehaves (or is absent)\r\n\t\t// then create it from scratch.\r\n\t\twindow.CustomEvent = CustomEvent\r\n\t}\r\n}"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;AAEA,SAASA,WAAW,CAACC,UAAU,EAAEC,OAAO,EACxC;EACCA,OAAO,GAAGA,OAAO,IACjB;IACCC,OAAO,EAAM,KAAK;IAClBC,UAAU,EAAG,KAAK;IAClBC,MAAM,EAAOC;EACd,CAAC;;EAED;EACA,IAAMC,KAAK,GAAGC,QAAQ,CAACC,WAAW,CAAC,aAAa,CAAC;EACjDF,KAAK,CAACG,eAAe,CAACT,UAAU,EAAEC,OAAO,CAACC,OAAO,EAAED,OAAO,CAACE,UAAU,EAAEF,OAAO,CAACG,MAAM,CAAC;;EAEtF;EACA,IAAMM,cAAc,GAAGJ,KAAK,CAACI,cAAc;EAC3CJ,KAAK,CAACI,cAAc,GAAG,YACvB;IACCA,cAAc,CAACC,IAAI,CAAC,IAAI,CAAC;IAEzB,IACA;MACCC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,kBAAkB,EAC9C;QACCC,GAAG,iBACH;UACC,OAAO,IAAI;QACZ;MACD,CAAC,CAAC;IACH,CAAC,CACD,OAAOC,KAAK,EACZ;MACC,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC7B;EACD,CAAC;EAED,OAAOV,KAAK;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,OAAOW,MAAM,KAAK,WAAW,EACjC;EACClB,WAAW,CAACmB,SAAS,GAAGD,MAAM,CAACE,KAAK,CAACD,SAAS;AAC/C;AAEe,SAASE,mBAAmB,GAC3C;EACC,IACA;IACC,IAAMd,KAAK,GAAG,IAAIW,MAAM,CAAClB,WAAW,CAAC,MAAM,CAAC;IAC5CO,KAAK,CAACI,cAAc,EAAE;IACtB,IAAIJ,KAAK,CAACU,gBAAgB,KAAK,IAAI,EACnC;MACC;MACA;MACA,MAAM,IAAIK,KAAK,CAAC,2BAA2B,CAAC;IAC7C;EACD,CAAC,CACD,OAAON,KAAK,EACZ;IACC;IACA;IACAE,MAAM,CAAClB,WAAW,GAAGA,WAAW;EACjC;AACD"}