"use strict";

exports.__esModule = true;
exports.default = createLocationMiddleware;

var _ActionTypes = _interopRequireDefault(require("./ActionTypes"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createLocationMiddleware({
  makeLocationDescriptor,
  makeLocation
}) {
  return function locationMiddleware() {
    return next => action => {
      const {
        type,
        payload
      } = action;

      switch (type) {
        case _ActionTypes.default.NAVIGATE:
        case _ActionTypes.default.CREATE_HREF:
          return next({
            type,
            payload: makeLocationDescriptor(payload)
          });

        case _ActionTypes.default.CREATE_LOCATION:
          return makeLocation(next({
            type,
            payload: makeLocationDescriptor(payload)
          }));

        case _ActionTypes.default.UPDATE_LOCATION:
          return next({
            type,
            payload: makeLocation(payload)
          });

        default:
          return next(action);
      }
    };
  };
}

module.exports = exports.default;