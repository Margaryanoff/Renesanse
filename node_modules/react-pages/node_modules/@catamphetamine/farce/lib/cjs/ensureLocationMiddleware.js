"use strict";

exports.__esModule = true;
exports.default = ensureLocationMiddleware;

var _ActionTypes = _interopRequireDefault(require("./ActionTypes"));

var _ensureLocation = _interopRequireDefault(require("./ensureLocation"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function ensureLocationMiddleware() {
  return next => action => {
    const {
      type,
      payload
    } = action;

    switch (type) {
      case _ActionTypes.default.PUSH:
        return next({
          type: _ActionTypes.default.NAVIGATE,
          payload: Object.assign({}, (0, _ensureLocation.default)(payload), {
            action: 'PUSH'
          })
        });

      case _ActionTypes.default.REPLACE:
        return next({
          type: _ActionTypes.default.NAVIGATE,
          payload: Object.assign({}, (0, _ensureLocation.default)(payload), {
            action: 'REPLACE'
          })
        });

      case _ActionTypes.default.CREATE_HREF:
      case _ActionTypes.default.CREATE_LOCATION:
        return next({
          type,
          payload: (0, _ensureLocation.default)(payload)
        });

      default:
        return next(action);
    }
  };
}

module.exports = exports.default;